# 微信小程序域名及安全配置说明

## 配置要求

在使用本小程序前，请确保完成以下配置：

### 1. 服务器域名配置

登录[微信公众平台](https://mp.weixin.qq.com/)，进入【开发】-【开发管理】-【开发设置】-【服务器域名】，添加以下域名：

- **request合法域名**：
  - `https://excel.sube.top`

- **uploadFile合法域名**：
  - `https://excel.sube.top`

- **downloadFile合法域名**：
  - `https://excel.sube.top`

### 2. web-view业务域名

如果使用web-view组件展示比较结果，需要添加：
- `https://excel.sube.top`

### 3. TLS & HTTPS 要求

微信小程序要求必须使用 HTTPS 且 TLS 版本必须在 1.2 及以上。请确保服务器：
- 使用有效的SSL证书
- 支持TLS 1.2及以上版本
- 证书链完整有效

## 域名校验失败的可能原因

如果看到"工具未校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书"警告：

1. **开发环境**：开发工具中点击【详情】-【本地设置】-【不校验合法域名...】

2. **生产环境**：必须完成上述域名配置，否则：
   - 请求将被拦截
   - 文件上传下载将失败
   - web-view将无法打开

## 服务器502错误处理

如果遇到"502 Bad Gateway"错误：

1. **临时解决方案**：
   - 等待几分钟后重试
   - 检查网络连接是否稳定

2. **联系管理员**：
   - 如果问题持续存在，请联系管理员检查服务器状态
   - 提供错误发生时间和具体操作步骤

## 配置检查清单

- [ ] request合法域名已添加
- [ ] uploadFile合法域名已添加
- [ ] downloadFile合法域名已添加
- [ ] web-view业务域名已添加（如需）
- [ ] 服务器证书有效
- [ ] TLS版本≥1.2
- [ ] 证书链完整 